// davai.eu speedrun any%

// tean sonu
if (document.location.href.startsWith("https://davai.eu/student-page/learn-words")) {
    // leia koik sonad ja vajuta "Знаю"
    let all_buttons = document.getElementsByClassName("btn btn_green fgow_i_know")
    for (i = 0; i < all_buttons.length; i++) {
        console.log(all_buttons.item(i).click())
    }
    // mine jargmisele lehele
    document.getElementsByClassName("link_next_dalee btn btn_green next-game_button").item(0).click()
}

// paarid
if (document.location.href.startsWith("https://davai.eu/student-page/find-a-pair/")) {
    let left_elems = document.getElementsByClassName("wglr_one wglr_one_left")
    let right_elems = document.getElementsByClassName("wglr_one wglr_one_right")
    // ara kysi miks see iteratib kymme korda, yhest ei piisanud
    for (k = 0; k < 10; k++) {
        for (i = 0; i < left_elems.length; i++) {
            let answer = left_elems.item(i).attributes.item(1).value
            left_elems.item(i).click()
            for (j = 0; j < right_elems.length; j++) {
                let right_elem_text = right_elems.item(j).innerText
                if (answer == right_elem_text) {
                    right_elems.item(j).click()
                }
            }
        }
    }
    document.getElementsByClassName("link_next_dalee btn btn_green next-game_button").item(0).click()
}

// kirjuta sona
if (document.location.href.startsWith("https://davai.eu/student-page/enter-word/")) {
    let elem_count = document.getElementsByClassName("test_enter_word first ").length
    for (i = 0; i < elem_count; i++) {
        let cur_elem = document.getElementsByClassName("test_enter_word first  shown")
        let answer = cur_elem.item(0).getElementsByClassName("podskazka_text").item(0).innerText
        let input_field = cur_elem.item(0).getElementsByClassName("enter_word")
        input_field.item(0).value = answer
        let button = cur_elem.item(0).getElementsByClassName("send_word")
        button.item(0).click()
    }
    document.getElementsByClassName("link_next_dalee btn btn_green next-game_button").item(0).click()
}

// skrembl
if (document.location.href.startsWith("https://davai.eu/student-page/skrembl/")) {
    const interval = setInterval(function() {
        if (document.getElementsByClassName("link_next_dalee btn btn_green next-game_button").item(0).attributes.item(2) == undefined) {

            let cur_elem = document.getElementsByClassName("one_slovesnoe_chodo")
            activeBox = document.getElementsByClassName("one_slovesnoe_chodo shown").item("").getElementsByClassName("bukovki_yakubovicha").item("").getElementsByClassName("one_bukovka one_bukovka_pole active")
            let answer = activeBox.item("").getAttribute("data-val")
            let letters = document.getElementsByClassName("one_slovesnoe_chodo shown").item(0).getElementsByClassName("one_bukovka2")
            for (i = 0; i < letters.length; i++) {
                if (answer == letters.item(i).innerText.toLowerCase() && !letters.item(i).hasAttribute("style")) {
                    letters.item(i).click()
                    break
                }
            }
        }
        else {
            document.getElementsByClassName("link_next_dalee btn btn_green next-game_button").item(0).click()
            clearInterval(interval)
        }
    }, 1)
}

// kummel
if (document.location.href.startsWith("https://davai.eu/student-page/flower/")) {
    let source = document.getElementsByClassName("col-sm-4 col-game3-image").item(0).children.romashka
    source.setAttribute("data-errors", (-69 - source.length))

    let elems = document.getElementsByClassName("slovo-i-perevod-g3") + 1
    for (i = 1; i < elems.length; i++) {
        let skip = document.getElementsByClassName("btn fgow_dont_know2 fgow_dont_know_g3").item(0)
        skip.click()
    }

    document.getElementsByClassName("link_next_dalee btn btn_green next-game_button").item(0).click()
}

// test
if (document.location.href.startsWith("https://davai.eu/student-page/test/")) {
    // Literally just changing error element class name to something else
    let exam_elems = document.getElementsByClassName("one_test_word")
    for (i = 1; i < exam_elems.length; i++) {
        exam_elems.item(i).attributes.item(0).nodeValue = "uwu"
    }
    // document.getElementsByClassName("igra sama-igra ighra-test").item("").getElementsByClassName("container").item("").getElementsByClassName("error_text text-center").item(0).classList.item("value").replace("error_text", "broken_website")
    document.getElementsByClassName("btn btn_green send_word_test").item(0).click()
    location.replace("https://davai.eu/student-page/")
}
